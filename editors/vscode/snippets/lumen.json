{
  "Cell": {
    "prefix": "cell",
    "body": [
      "cell ${1:name}(${2:params}) -> ${3:ReturnType}",
      "  $0",
      "end"
    ],
    "description": "Define a cell (function)"
  },
  "Cell with effects": {
    "prefix": "celleff",
    "body": [
      "cell ${1:name}(${2:params}) -> ${3:ReturnType} / {${4:effects}}",
      "  $0",
      "end"
    ],
    "description": "Define a cell with effects"
  },
  "Record": {
    "prefix": "record",
    "body": [
      "record ${1:Name}",
      "  ${2:field}: ${3:Type}",
      "end"
    ],
    "description": "Define a record"
  },
  "Enum": {
    "prefix": "enum",
    "body": [
      "enum ${1:Name}",
      "  ${2:Variant}",
      "end"
    ],
    "description": "Define an enum"
  },
  "Match": {
    "prefix": "match",
    "body": [
      "match ${1:expr}",
      "  ${2:Pattern} -> ${0}",
      "end"
    ],
    "description": "Match expression"
  },
  "If": {
    "prefix": "if",
    "body": [
      "if ${1:condition}",
      "  ${0}",
      "end"
    ],
    "description": "If statement"
  },
  "If-else": {
    "prefix": "ifel",
    "body": [
      "if ${1:condition}",
      "  ${2}",
      "else",
      "  ${0}",
      "end"
    ],
    "description": "If-else statement"
  },
  "For": {
    "prefix": "for",
    "body": [
      "for ${1:item} in ${2:collection}",
      "  ${0}",
      "end"
    ],
    "description": "For loop"
  },
  "While": {
    "prefix": "while",
    "body": [
      "while ${1:condition}",
      "  ${0}",
      "end"
    ],
    "description": "While loop"
  },
  "Let": {
    "prefix": "let",
    "body": [
      "let ${1:name}: ${2:Type} = ${0}"
    ],
    "description": "Variable declaration"
  },
  "Grant": {
    "prefix": "grant",
    "body": [
      "grant ${1:Tool} with",
      "  ${0}",
      "end"
    ],
    "description": "Define a grant with policy"
  },
  "Test": {
    "prefix": "test",
    "body": [
      "cell test_${1:name}() -> Bool",
      "  ${0}",
      "  return true",
      "end"
    ],
    "description": "Define a test cell"
  },
  "Lambda": {
    "prefix": "fn",
    "body": [
      "fn(${1:params}) -> ${2:ReturnType} => ${3:expr}"
    ],
    "description": "Lambda expression"
  },
  "Lambda block": {
    "prefix": "fnblock",
    "body": [
      "fn(${1:params}) -> ${2:ReturnType}",
      "  $0",
      "end"
    ],
    "description": "Lambda with block body"
  },
  "Process memory": {
    "prefix": "memory",
    "body": [
      "process ${1:name} = memory[${2:Type}] {",
      "  $0",
      "}"
    ],
    "description": "Define a memory process"
  },
  "Process machine": {
    "prefix": "machine",
    "body": [
      "process ${1:name} = machine {",
      "  states {",
      "    ${2:Initial}(${3:Type}),",
      "  }",
      "  ",
      "  cell run() -> ${4:ReturnType}",
      "    $0",
      "  end",
      "}"
    ],
    "description": "Define a machine process"
  },
  "Process pipeline": {
    "prefix": "pipeline",
    "body": [
      "process ${1:name} = pipeline[${2:InputType}, ${3:OutputType}] {",
      "  stage ${4:stage1}(data: ${2:InputType}) -> ${5:IntermediateType}",
      "    $0",
      "  end",
      "}"
    ],
    "description": "Define a pipeline process"
  },
  "Use tool": {
    "prefix": "use",
    "body": [
      "use tool \"${1:provider}:${2:tool}\""
    ],
    "description": "Use a tool"
  },
  "Import": {
    "prefix": "import",
    "body": [
      "import ${1:module}"
    ],
    "description": "Import a module"
  },
  "Type alias": {
    "prefix": "type",
    "body": [
      "type ${1:Name} = ${0:Type}"
    ],
    "description": "Define a type alias"
  },
  "Result type": {
    "prefix": "result",
    "body": [
      "result[${1:T}, ${2:E}]"
    ],
    "description": "Result type with ok and err variants"
  },
  "List comprehension": {
    "prefix": "listcomp",
    "body": [
      "[${1:expr} for ${2:item} in ${3:collection}]"
    ],
    "description": "List comprehension"
  },
  "Directive deterministic": {
    "prefix": "@det",
    "body": [
      "@deterministic true"
    ],
    "description": "Enable deterministic mode"
  },
  "Directive location": {
    "prefix": "@loc",
    "body": [
      "@location \"${1:path}\""
    ],
    "description": "Set execution location"
  },
  "Role system": {
    "prefix": "rolesys",
    "body": [
      "role system: ${0:System prompt}"
    ],
    "description": "Define system role content"
  },
  "Role user": {
    "prefix": "roleuser",
    "body": [
      "role user: ${0:User prompt}"
    ],
    "description": "Define user role content"
  },
  "Role assistant": {
    "prefix": "roleast",
    "body": [
      "role assistant: ${0:Assistant response}"
    ],
    "description": "Define assistant role content"
  }
}
