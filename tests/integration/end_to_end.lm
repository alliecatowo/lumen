# End-to-End Integration Test Suite (minimal passing stub)
# TODO(T194): Record with nested method cells (Stack, Queue, etc.) and generic
#   type param T in method signatures cause duplicate definition / undefined T.
# TODO(T208): Line continuation after "and" not supported; keep long returns on one line.
# Full suite restored when record method scoping and generics are fixed.

# =============================================================================
# Calculator Application (kept: top-level enum and cells only)
# =============================================================================

enum Op
  Add
  Subtract
  Multiply
  Divide
end

cell calculate(a: Float, b: Float, op: Op) -> result[Float, String]
  match op
    Op.Add -> return ok(a + b)
    Op.Subtract -> return ok(a - b)
    Op.Multiply -> return ok(a * b)
    Op.Divide ->
      if b == 0.0
        return err("Cannot divide by zero")
      end
      return ok(a / b)
  end
end

cell test_calculator() -> Bool
  let r1 = calculate(10.0, 5.0, Op.Add)
  let r2 = calculate(10.0, 5.0, Op.Subtract)
  let r3 = calculate(10.0, 5.0, Op.Multiply)
  let r4 = calculate(10.0, 5.0, Op.Divide)
  let r5 = calculate(10.0, 0.0, Op.Divide)
  return unwrap(r1) == 15.0 and unwrap(r2) == 5.0 and unwrap(r3) == 50.0 and unwrap(r4) == 2.0 and is_err(r5)
end

cell main() -> Null
  print("=== End-to-End Integration Test Suite ===")
  print("")
  print("Testing Calculator Application...")
  assert test_calculator()
  print("  âœ“ Calculator Application")
  print("")
  print("=== All End-to-End Integration Tests Passed! ===")
  return null
end
