name = "wares-registry"
main = "worker.ts"
compatibility_date = "2024-01-01"

# R2 bucket for package storage
[[r2_buckets]]
binding = "REGISTRY_BUCKET"
bucket_name = "wares-registry"

# Environment variables
[vars]
# Set via wrangler secret put for sensitive values
# TRANSPARENCY_LOG_URL = "https://wares-transparency-log.alliecatowo.workers.dev"
# TRANSPARENCY_LOG_API_KEY = "..."
# CA_PRIVATE_KEY = "..."
# CA_CERTIFICATE = "..."

# Service Bindings
[[services]]
binding = "LOG_WORKER"
service = "wares-transparency-log"

# Custom domain - path-based routing under wares.lumen-lang.com
routes = [
  { pattern = "wares.lumen-lang.com/api/*", custom_domain = true }
]
